<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.crewmate.shopapisystem.service.code.CommonCodeMapper">

    <!-- table Alias는 붙이자.  -->
    <sql id="selectCommonCodeListWhere">
        <if test="searchType != null and searchType == 'codeGrp'">
          WHERE code_grp LIKE CONCAT('%', #{searchWord}, '%')
        </if>
        <if test="searchType != null and searchType == 'codeNm'">
          WHERE code_nm LIKE CONCAT('%', #{searchWord}, '%')
        </if>
    </sql>
    <select id="selectCommonCodeList" resultType="Code" parameterType="CommonCodeSearch">
        SELECT code_grp
             , code
             , code_nm
          FROM system.code
          union all
          SELECT code_grp
             , code
             , code_nm
          FROM system.code
          union all
          SELECT code_grp
             , code
             , code_nm
          FROM system.code
          union all
          SELECT code_grp
             , code
             , code_nm
          FROM system.code
          union all
          SELECT code_grp
             , code
             , code_nm
          FROM system.code
          union all
          SELECT code_grp
             , code
             , code_nm
          FROM system.code
          union all
          SELECT code_grp
             , code
             , code_nm
          FROM system.code
          union all
          SELECT code_grp
             , code
             , code_nm
          FROM system.code
          union all
          SELECT code_grp
             , code
             , code_nm
          FROM system.code
          union all
          SELECT code_grp
             , code
             , code_nm
          FROM system.code
        <include refid="selectCommonCodeListWhere"></include>
        <if test="paging">
        LIMIT #{limit} OFFSET #{offset}
        </if>
    </select>
    
    <select id="selectCommonCodeListCount" resultType="int" parameterType="CommonCodeSearch">
        SELECT COUNT(*)
          FROM system.code
        <include refid="selectCommonCodeListWhere"></include>
    </select>
</mapper>